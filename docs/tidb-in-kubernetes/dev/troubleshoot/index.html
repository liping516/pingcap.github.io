<!DOCTYPE html>
<html lang="en"><head>
<meta name="robots" content="noindex"><meta charset="utf-8"/><meta content="IE=edge" http-equiv="X-UA-Compatible"/><meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" name="viewport"/>
<script>
window.ga =
    window.ga ||
    function() {
        ;(ga.q = ga.q || []).push(arguments)
    }
ga.l = +new Date()
ga('create', 'UA-99991864-4', 'auto')
ga('send', 'pageview')
</script>
<script async="" src="https://download.pingcap.com/js/ga-analytics.js"></script>
<style media="screen" type="text/css">
    .st_tree {
        display: none;
    }
</style>
<link href="https://download.pingcap.com/style/github-markdown.css" rel="stylesheet"/>
<link href="/css/doc.css" rel="stylesheet"/>
<title>Troubleshoot TiDB in Kubernetes | TiDB Documentation</title><link href="/images/favicon.ico" rel="icon" type="image/x-icon"/>
<link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="/images/apple-touch-icon.png" rel="apple-touch-icon"/>
<meta content="Learn how to diagnose and resolve issues when you use TiDB in Kubernetes." name="description"/>
<meta content="noodp" name="robots"/>
<meta content="TiDB, MySQL, HTAP, Open Source, Cloud-Native, NewSQL, Aurora Alternative" name="keywords"/>
<meta content="en_US" property="og:locale"/>
<meta content="website" property="og:type"/>
<meta content="Troubleshoot TiDB in Kubernetes | TiDB Documentation" property="og:title"/>
<meta content="Learn how to diagnose and resolve issues when you use TiDB in Kubernetes." property="og:description"/>
<meta content="https://pingcap.com/docs/tidb-in-kubernetes/dev/troubleshoot/" property="og:url"/>
<meta content="MySQL at Scale. No more manual sharding" property="og:site_name"/>
<meta content="/images/pingcap-opengraph.jpg" property="og:image"/>
<meta content="/images/pingcap-opengraph.jpg" property="og:image:secure_url"/><meta content="summary" name="twitter:card"/><meta content="Learn how to diagnose and resolve issues when you use TiDB in Kubernetes." name="twitter:description"/>
<meta content="Troubleshoot TiDB in Kubernetes | TiDB Documentation" name="twitter:title"/>
<meta content="@pingcap" name="twitter:site"/><meta content="https://pingcap.com/images/pingcap-opengraph.jpg" name="twitter:image"/><meta content="@pingcap" name="twitter:creator"/>
<script type="application/ld+json">
{
    "@context": "http:\/\/schema.org",
    "@type": "WebSite",
    "url": "https:\/\/pingcap.com\/",
    "name": "PingCAP",
    "potentialAction": {
        "@type": "SearchAction",
        "target": "https:\/\/pingcap.com\/?s={search_term_string}",
        "query-input": "required name=search_term_string"
    }
}
</script>
<script>
    (function(){
        var bp = document.createElement('script');
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>
<script async="" src="https://accounts.pingcap.com/static/pingcap_sso/js/track.beta.js" type="text/javascript"></script>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/lato/lato-regular-webfont.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/lato/lato-regular-webfont.woff" rel="preload" type="font/woff"/>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/lato/lato-regular-webfont.ttf" rel="preload" type="font/ttf"/>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/titilliumweb/titilliumweb-regular-webfont.woff2" rel="preload" type="font/woff2"/>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/titilliumweb/titilliumweb-regular-webfont.woff" rel="preload" type="font/woff"/>
<link as="font" crossorigin="anonymous" href="https://download.pingcap.com/fonts/titilliumweb/titilliumweb-regular-webfont.ttf" rel="preload" type="font/ttf"/>
<link as="script" href="https://download.pingcap.com/js/jquery.min.js" rel="preload"/>
<link href="/css/main.css" rel="stylesheet"/>
<link href="https://download.pingcap.com/style/docsearch.min.css" rel="stylesheet"/>
<script type="text/javascript">
var trackOutboundLink = function(url) {
  var redirectTriggered = false
  ga('send', 'event', 'outbound', 'click', url, {
    hitCallback: function() {
      redirectTriggered = true
      document.location = url
    }
  })
  setTimeout(function() {
    if (!redirectTriggered) {
      document.location = url
    }
  }, 1500)
}

var trackViews = function(btn_type, event_category) {
  var event_label = btn_type
  var eventCategory = event_category
  ga('send', 'event', {
    'eventCategory': eventCategory,
    'eventAction': 'click',
    'eventLabel': event_label,
    'transport': 'beacon'
  });
}
</script>
<script>if (location.pathname === '/') {
        if (location.hostname === 'pingcap.github.io') {
            location.href = '/en/'
        }
    }</script></head> <body data-lang="en"><div id="page-content">
<header class="fixed-top" role="navigation">
<div class="container">
<a class="nav-brand" href="/en"><img alt="PingCAP" src="/images/pingcap-logo.png"/></a>
<div class="nav-wrapper">
<div class="navigation">
<ul>
<li><a class="a-en" href="/tidb-cloud/">Cloud</a></li>
<li><a class="a-en" href="/tidb-academy">TiDB Academy</a></li>
<li class="docs-type-selector sel" id="docsTypeSelector">
<a class="header-doc-nav" href="#">Docs</a>
<div class="header-dropdown-menu" id="docsTypeSelectorItem">
<a class="header-dropdown-item" href="/docs/stable/">TiDB</a>
<a class="header-dropdown-item" href="/docs/tidb-in-kubernetes/stable/">TiDB in Kubernetes</a>
<a class="header-dropdown-item" href="/docs/tidb-data-migration/stable/">TiDB Data Migration (DM)</a>
</div>
</li>
<li><a class="a-en" href="/success-stories">Success
                    Stories</a></li>
<li><a class="a-en" href="/blog">Blog</a></li>
<li><a class="link-download link-download-en" href="/download">Free Download</a></li>
</ul>
</div>
<div class="global-search">
<form action="/search/docs/tidb-in-kubernetes/dev/" class="search-wrapper">
<span class="icon-search"><svg fill="#fff" height="18" viewbox="0 0 67.125 67.125" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M23.902 0C11.01 0 .523 10.488.523 23.38c0 12.891 10.487 23.379 23.379 23.379a23.258 23.258 0 0 0 14.471-5.037l24.816 24.817c.391.391.902.586 1.414.586s1.023-.195 1.414-.586a2 2 0 0 0 0-2.828L41.293 38.985c3.721-4.142 5.989-9.613 5.989-15.605C47.282 10.488 36.794 0 23.902 0zM4.523 23.38C4.523 12.694 13.216 4 23.902 4c10.687 0 19.38 8.694 19.38 19.38 0 5.396-2.221 10.279-5.791 13.795a1.959 1.959 0 0 0-.488.349 2.003 2.003 0 0 0-.271.343C33.31 40.9 28.825 42.76 23.903 42.76c-10.686-.001-19.38-8.695-19.38-19.38z"></path><path d="M24.075 8.591c-8.25 0-14.962 6.712-14.962 14.962a2 2 0 0 0 4 0c0-6.044 4.918-10.962 10.962-10.962a2 2 0 0 0 0-4z"></path></svg></span>
<input data-lang="en" data-type="/tidb-in-kubernetes/" id="search-input" name="q" placeholder="Search TiDB Docs" type="search"/>
</form>
</div>
</div>
<div class="nav-btn nav-slider">
<i class="material-icons"><svg height="16" viewbox="0 0 459 459" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M0 382.5h459v-51H0v51zM0 255h459v-51H0v51zM0 76.5v51h459v-51H0z" fill="#FFF"></path></svg></i>
</div>
</div>
</header>
<nav class="mobile-sidebar">
<div class="nav-header">
<div class="logo-wrap">
<a class="nav-brand" href="/en"><img alt="PingCAP" src="/images/pingcap-logo.png"/></a>
</div>
</div>
<ul class="ul-base">
<li><a href="/tidb-cloud/">Cloud</a></li>
<li><a class="tidb-academy" href="/tidb-academy">TiDB Academy</a></li>
<li class="docs-type-selector sel" id="docsTypeSelector">
<p class="header-doc-nav">Docs</p>
<div class="header-dropdown-menu" id="docsTypeSelectorItem">
<a class="header-dropdown-item" href="/docs/stable/">TiDB</a>
<a class="header-dropdown-item" href="/docs/tidb-in-kubernetes/stable/">TiDB in Kubernetes</a>
<a class="header-dropdown-item" href="/docs/tidb-data-migration/stable/">TiDB Data Migration (DM)</a>
</div>
</li>
<li><a href="/success-stories">Success Stories</a></li>
<li><a href="/blog">Blog</a></li>
<li><a class="link-download" href="/download">Free Download</a></li>
</ul>
<div class="nav-footer">
<div class="contact-list-wrap">
<div class="flex-list">
<h4 class="list-title"><strong>Contact</strong></h4>
<ul class="social ul-base">
<li><a class="twitter" href="https://twitter.com/PingCAP" target="_blank"><svg height="18" viewbox="0 0 612 612" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M612 116.258a250.714 250.714 0 0 1-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 0 1-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg></a></li>
<li><a class="linkedin" href="https://www.linkedin.com/company/pingcap/" target="_blank"><svg height="18" viewbox="0 0 438.536 438.535" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M5.424 145.895H99.64v282.932H5.424zM408.842 171.739c-19.791-21.604-45.967-32.408-78.512-32.408-11.991 0-22.891 1.475-32.695 4.427-9.801 2.95-18.079 7.089-24.838 12.419-6.755 5.33-12.135 10.278-16.129 14.844-3.798 4.337-7.512 9.389-11.136 15.104v-40.232h-93.935l.288 13.706c.193 9.139.288 37.307.288 84.508 0 47.205-.19 108.777-.572 184.722h93.931V270.942c0-9.705 1.041-17.412 3.139-23.127 4-9.712 10.037-17.843 18.131-24.407 8.093-6.572 18.13-9.855 30.125-9.855 16.364 0 28.407 5.662 36.117 16.987 7.707 11.324 11.561 26.98 11.561 46.966V428.82h93.931V266.664c-.007-41.688-9.897-73.328-29.694-94.925zM53.103 9.708c-15.796 0-28.595 4.619-38.4 13.848C4.899 32.787 0 44.441 0 58.529 0 72.42 4.758 84.034 14.275 93.358c9.514 9.325 22.078 13.99 37.685 13.99h.571c15.99 0 28.887-4.661 38.688-13.99 9.801-9.324 14.606-20.934 14.417-34.829-.19-14.087-5.047-25.742-14.561-34.973C81.562 14.323 68.9 9.708 53.103 9.708z"></path></svg></a></li>
<li><a class="reddit" href="https://www.reddit.com/r/TiDB/" target="_blank"><svg height="18" viewbox="0 0 279.748 279.748" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M279.748 133.142c0-19.299-15.701-35-35-35-10.768 0-20.674 4.812-27.279 13.064-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692 42.895 9.294c3.285 12.782 14.901 22.258 28.693 22.258 16.336 0 29.627-13.29 29.627-29.626 0-16.336-13.291-29.627-29.627-29.627-11.801 0-21.999 6.941-26.759 16.95l-49.497-10.725a10.002 10.002 0 0 0-11.651 6.756L134.636 95.43c-26.164.638-50.988 6.053-72.356 15.775-6.606-8.251-16.512-13.063-27.28-13.063-19.299 0-35 15.701-35 35 0 9.373 3.683 18.173 10.222 24.709-3.9 8.37-5.875 17.076-5.875 25.936 0 24.048 14.396 46.492 40.538 63.199 25.447 16.264 59.183 25.221 94.989 25.221 35.808 0 69.542-8.957 94.989-25.221 26.142-16.707 40.538-39.151 40.538-63.199 0-8.859-1.975-17.565-5.875-25.936 6.539-6.537 10.222-15.336 10.222-24.709zM15.369 145.139c-2.212-3.59-3.369-7.688-3.369-11.997 0-12.682 10.317-23 23-23 5.444 0 10.558 1.851 14.649 5.258-14.622 8.302-26.132 18.289-34.28 29.739zm52.671 20.266c0-13.785 11.215-25 25-25s25 11.215 25 25-11.215 25-25 25-25-11.215-25-25zm123.119 57.054c-9.745 10.637-29.396 17.244-51.285 17.244-21.888 0-41.539-6.607-51.284-17.244a9.937 9.937 0 0 1-2.617-7.192 9.933 9.933 0 0 1 3.235-6.937 9.974 9.974 0 0 1 6.754-2.627c2.797 0 5.484 1.183 7.373 3.244 5.803 6.333 20.827 10.756 36.539 10.756s30.737-4.423 36.539-10.756a10.022 10.022 0 0 1 7.374-3.244c2.508 0 4.906.933 6.755 2.627a9.928 9.928 0 0 1 3.234 6.937 9.933 9.933 0 0 1-2.617 7.192zm-4.451-32.054c-13.785 0-25-11.215-25-25s11.215-25 25-25 25 11.215 25 25-11.215 25-25 25zm77.671-45.266c-8.147-11.45-19.657-21.436-34.28-29.739 4.092-3.408 9.205-5.258 14.649-5.258 12.683 0 23 10.318 23 23 0 4.309-1.157 8.407-3.369 11.997z"></path></svg></a></li>
<li><a class="google-plus" href="https://groups.google.com/forum/#!forum/tidb-user" target="_blank"><svg height="18" viewbox="0 0 491.858 491.858" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M377.472 224.957H201.319v58.718H308.79c-16.032 51.048-63.714 88.077-120.055 88.077-69.492 0-125.823-56.335-125.823-125.824 0-69.492 56.333-125.823 125.823-125.823 34.994 0 66.645 14.289 89.452 37.346l42.622-46.328c-34.04-33.355-80.65-53.929-132.074-53.929C84.5 57.193 0 141.693 0 245.928s84.5 188.737 188.736 188.737c91.307 0 171.248-64.844 188.737-150.989v-58.718l-.001-.001zM491.858 224.857h-36.031v-36.031h-30.886v36.031H388.91v30.883h36.031v36.032h30.886V255.74h36.031z"></path></svg></a></li>
<li><a class="stack-overflow" href="https://stackoverflow.com/questions/tagged/tidb" target="_blank"><svg height="18" viewbox="0 0 547.597 547.597" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M140.81 475.111h.024l189.91-.269c8.434-.013 15.3-6.886 15.3-15.318v-21.298c0-8.428-6.854-15.288-15.3-15.288l-189.91.264c-8.433.012-15.3 6.885-15.3 15.318v21.31c.001 8.427 6.855 15.281 15.276 15.281z"></path><path d="M58.667 517.854c.073 29.26.073 29.449 3.072 29.449h.055l10.612.294h.086s85.814 0 171.629-.036c42.914-.019 85.821-.05 118-.092 16.09-.019 29.505-.043 38.887-.074 17.803-.055 17.803-.055 17.803-3.072l.3-10.697V333.299c0-8.434-6.866-15.3-15.3-15.3h-11.909c-8.434 0-15.3 6.866-15.3 15.3V496.22c0 5.062-4.119 9.18-9.181 9.18H110.51c-5.061 0-9.18-4.118-9.18-9.18V333.299c0-8.434-6.867-15.3-15.3-15.3H73.82c-8.433 0-15.3 6.86-15.3 15.3 0 23.342.012 76.084.055 122.981.019 23.447.05 45.442.092 61.574z"></path><path d="M142.322 397.399l189.402 17.467c.478.043.948.062 1.413.062 7.956 0 14.468-5.985 15.159-13.917l1.83-21.096c.729-8.396-5.508-15.851-13.898-16.628l-189.102-17.461c-8.593-.795-15.869 5.441-16.653 13.825l-1.97 21.108a15.172 15.172 0 0 0 3.452 11.181 15.19 15.19 0 0 0 10.367 5.459zM437.636 208.849a15.253 15.253 0 0 0 17.694 12.443l21.065-3.678c8.311-1.451 13.898-9.395 12.454-17.706l-32.504-187.23c-1.42-8.207-9.21-13.917-17.692-12.448l-21.065 3.678c-8.311 1.451-13.898 9.395-12.454 17.705l32.502 187.236zM190.333 194.375l163.6 96.708a15.28 15.28 0 0 0 7.778 2.136c5.393 0 10.447-2.876 13.183-7.509l10.876-18.36c2.08-3.519 2.674-7.631 1.658-11.591a15.18 15.18 0 0 0-7.032-9.358l-163.6-96.714c-7.014-4.149-16.836-1.597-20.967 5.374l-10.869 18.36a15.2 15.2 0 0 0-1.658 11.591 15.21 15.21 0 0 0 7.031 9.363zM387.525 240.501a15.276 15.276 0 0 0 12.626 6.659c3.091 0 6.077-.924 8.635-2.681l17.405-11.934c6.953-4.768 8.752-14.314 4.015-21.292L323.29 54.104c-4.584-6.732-14.498-8.623-21.236-3.984l-17.737 12.21c-6.945 4.779-8.727 14.327-3.971 21.291l107.179 156.88zM154.482 302.319l183.465 49.156c1.298.349 2.632.526 3.966.526 6.903 0 12.98-4.67 14.762-11.347l5.508-20.624c2.179-8.152-2.681-16.555-10.826-18.74l-183.465-49.162c-8.017-2.148-16.604 2.852-18.728 10.826l-5.508 20.63c-2.179 8.142 2.68 16.551 10.826 18.735z"></path></svg></a></li>
</ul>
</div>
<div class="subscribe">
<a href="https://share.hsforms.com/1e2W03wLJQQKPd1d9rCbj_Q2npzm"><button class="btn btn-subscribe f-tc" style="margin-left: 0.75rem;">Subscribe to Blog</button></a>
</div>
</div>
<div class="container">
<a class="btn-lang" href="/docs-cn/" id="lang">中文</a>
</div>
</div>
</nav>
<div class="doc">
<div class="container">
<div class="sidebar">
<div class="sticky-sidebar docs-sticky-sidebar">
<div class="title"> TiDB in Kubernetes Documentation </div>
<div class="version-switcher">
<button id="dropdownMenuButton" type="button">dev</button>
<div class="dropdown-menu visibility-hide" id="dropdown-menu-items">
<a class="dropdown-item " href="
                /docs/tidb-in-kubernetes/stable/troubleshoot/">v1.1 (stable)</a>
<a class="dropdown-item " href="
                /docs/tidb-in-kubernetes/v1.0/troubleshoot/">v1.0</a>
<a class="dropdown-item " href="
                /docs/tidb-in-kubernetes/dev/troubleshoot/">dev</a></div>
</div>
<div class="st_tree nav-toc docs-nav-toc"><ul><li class="has-child"><a href="#">
<span>Introduction</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/tidb-operator-overview/">
<span>Overview</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/notes-tidb-operator-v1.1/">
<span>TiDB Operator v1.1 Notice</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>Get Started</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-tidb-from-kubernetes-kind/">
<span>kind</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-tidb-from-kubernetes-gke/">
<span>GKE</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-tidb-from-kubernetes-minikube/">
<span>Minikube</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>Deploy</span>
<i class="icon-arrow"></i></a><ul><li class="has-child"><a href="#">
<span>Deploy TiDB Cluster</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-on-aws-eks/">
<span>On AWS EKS</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-on-gcp-gke/">
<span>On GCP GKE</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-on-alibaba-cloud/">
<span>On Alibaba Cloud ACK</span>
</a>
</li><li class="has-child"><a href="#">
<span>On Self-managed Kubernetes</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/prerequisites/">
<span>Prerequisites</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/configure-storage-class/">
<span>Configure Storage Class</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-tidb-operator/">
<span>Deploy TiDB Operator</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/configure-a-tidb-cluster/">
<span>Configure Resource and Disaster Recovery</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/configure-cluster-using-tidbcluster/">
<span>Configure TiDB Cluster Using TidbCluster</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-on-general-kubernetes/">
<span>Deploy TiDB Cluster</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/initialize-a-cluster/">
<span>Initialize TiDB Cluster</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/access-tidb/">
<span>Access TiDB Cluster</span>
</a>
</li></ul>
</li></ul>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-tiflash/">
<span>Deploy TiFlash</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-ticdc/">
<span>Deploy TiCDC</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/deploy-tidb-binlog/">
<span>Deploy TiDB Binlog</span>
</a>
</li><li class="has-child"><a href="#">
<span>Deploy Monitoring</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/monitor-a-tidb-cluster/">
<span>Monitor Kubernetes and TiDB Cluster</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/monitor-using-tidbmonitor/">
<span>Monitor TiDB Cluster Using TidbMonitor</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/access-dashboard/">
<span>Access TiDB Dashboard</span>
</a>
</li></ul>
</li></ul>
</li><li class="has-child"><a href="#">
<span>Secure</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/enable-tls-for-mysql-client/">
<span>Enable TLS for the MySQL Client</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/enable-tls-between-components/">
<span>Enable TLS between TiDB Components</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>Operate</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/upgrade-a-tidb-cluster/">
<span>Upgrade TiDB Cluster</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/upgrade-tidb-operator/">
<span>Upgrade TiDB Operator</span>
</a>
</li><li class="has-child"><a href="#">
<span>Scale TiDB Cluster</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/scale-a-tidb-cluster/">
<span>Manually Scale</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/enable-tidb-cluster-auto-scaling/">
<span>Automatically Scale</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>Backup and Restore</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/backup-and-restore-using-helm-charts/">
<span>Use Helm Charts</span>
</a>
</li><li class="has-child"><a href="#">
<span>Use CRDs</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/backup-to-gcs/">
<span>Back up Data to GCS Using Mydumper</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/restore-from-gcs/">
<span>Restore Data from GCS Using TiDB Lightning</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/backup-to-s3/">
<span>Back up Data to S3-Compatible Storage Using Mydumper</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/restore-from-s3/">
<span>Restore Data from S3-Compatible Storage Using TiDB Lightning</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/backup-to-aws-s3-using-br/">
<span>Back up Data to S3-Compatible Storage Using BR</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/restore-from-aws-s3-using-br/">
<span>Restore Data from S3-Compatible Storage Using BR</span>
</a>
</li></ul>
</li></ul>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/restart-a-tidb-cluster/">
<span>Restart a TiDB Cluster</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/maintain-a-kubernetes-node/">
<span>Maintain a Kubernetes Node</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/collect-tidb-logs/">
<span>Collect TiDB Logs</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/use-auto-failover/">
<span>Enable Automatic Failover</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/pd-recover/">
<span>Recover the PD Cluster</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/destroy-a-tidb-cluster/">
<span>Destroy a TiDB Cluster</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/restore-data-using-tidb-lightning/">
<span>Import Data</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/troubleshoot/">
<span>Troubleshoot</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/faq/">
<span>FAQs</span>
</a>
</li><li class="has-child"><a href="#">
<span>Reference</span>
<i class="icon-arrow"></i></a><ul><li class="has-child"><a href="#">
<span>Architecture</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/tidb-scheduler/">
<span>TiDB Scheduler</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/advanced-statefulset/">
<span>Advanced StatefulSet Controller</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/enable-admission-webhook/">
<span>Admission Controller</span>
</a>
</li></ul>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/benchmark-sysbench/">
<span>Sysbench Performance Test</span>
</a>
</li><li class="leaf-child">
<a href="https://github.com/pingcap/docs-tidb-operator/blob/master/zh/api-references.md">
<span>API References</span>
</a>
</li><li class="has-child"><a href="#">
<span>Tools</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/use-tkctl/">
<span>tkctl</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/tidb-toolkit/">
<span>TiDB Toolkit</span>
</a>
</li></ul>
</li><li class="has-child"><a href="#">
<span>Configure</span>
<i class="icon-arrow"></i></a><ul><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/configure-tidb-binlog-drainer/">
<span>Configure tidb-drainer Chart</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/tidb-cluster-chart-config/">
<span>Configure tidb-cluster Chart</span>
</a>
</li><li class="leaf-child">
<a href="/docs/tidb-in-kubernetes/dev/configure-backup/">
<span>Configure tidb-backup Chart</span>
</a>
</li></ul>
</li></ul>
</li></ul>
</div>
</div>
</div>
<div class="archive">
<div class="content markdown-body">
<h1 id="troubleshoot-tidb-in-kubernetes">Troubleshoot TiDB in Kubernetes</h1>
<p>This document describes some common issues and solutions when you use a TiDB cluster in Kubernetes.</p>
<h2 id="use-the-diagnostic-mode">Use the diagnostic mode</h2>
<p>When a Pod is in the <code>CrashLoopBackoff</code> state, the containers in the Pod quit continually. As a result, you cannot use <code>kubectl exec</code> or <code>tkctl debug</code> normally, making it inconvenient to diagnose issues.</p>
<p>To solve this problem, TiDB in Kubernetes provides the Pod diagnostic mode for PD, TiKV, and TiDB components. In this mode, the containers in the Pod hang directly after starting, and will not get into a state of repeated crash. Then you can use <code>kubectl exec</code> or <code>tkctl debug</code> to connect to the Pod containers for diagnosis.</p>
<p>To use the diagnostic mode for troubleshooting:</p>
<ol>
<li>
<p>Add an annotation to the Pod to be diagnosed:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl annotate pod <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span> -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> runmode<span style="color:#f92672">=</span>debug
</code></pre></div><p>The next time the container in the Pod is restarted, it detects this annotation and enters the diagnostic mode.</p>
</li>
<li>
<p>Wait for the Pod to enter the Running state.</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">watch kubectl get pod <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span> -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span>
</code></pre></div></li>
<li>
<p>Start the diagnosis.</p>
<p>Here's an example of using <code>kubectl exec</code> to get into the container for diagnosis:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl exec -it <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span> -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> -- /bin/sh
</code></pre></div></li>
<li>
<p>After finishing the diagnosis and resolving the problem, delete the Pod.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl delete pod <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span> -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span>
</code></pre></div><p>After the Pod is rebuilt, it automatically returns to the normal mode.</p>
</li>
</ol>
<h2 id="recover-the-cluster-after-accidental-deletion">Recover the cluster after accidental deletion</h2>
<p>TiDB Operator uses PV (Persistent Volume) and PVC (Persistent Volume Claim) to store persistent data. If you accidentally delete a cluster using <code>helm delete</code>, the PV/PVC objects and data are still retained to ensure data safety.</p>
<p>To restore the cluster at this time, use the <code>helm install</code> command to create a cluster with the same name. The retained PV/PVC and data are reused.</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">helm install pingcap/tidb-cluster -n <span style="color:#e6db74">${</span>release_name<span style="color:#e6db74">}</span> --namespace<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> --version<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>version<span style="color:#e6db74">}</span> -f values.yaml
</code></pre></div><h2 id="pod-is-not-created-normally">Pod is not created normally</h2>
<p>After creating a cluster using <code>helm install</code>, if the Pod is not created, you can diagnose it using the following commands:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get tidbclusters -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span>
kubectl get statefulsets -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span>
kubectl describe statefulsets -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> <span style="color:#e6db74">${</span>release_name<span style="color:#e6db74">}</span>-pd
</code></pre></div><h2 id="network-connection-failure-between-pods">Network connection failure between Pods</h2>
<p>In a TiDB cluster, you can access most Pods by using the Pod's domain name (allocated by the Headless Service). The exception is when TiDB Operator collects the cluster information or issues control commands, it accesses the PD (Placement Driver) cluster using the <code>service-name</code> of the PD service.</p>
<p>When you find some network connection issues between Pods from the log or monitoring metrics, or you find the network connection between Pods might be abnormal according to the problematic condition, you can follow the following process to diagnose and narrow down the problem:</p>
<ol>
<li>
<p>Confirm that the endpoints of the Service and Headless Service are normal:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> get endpoints <span style="color:#e6db74">${</span>release_name<span style="color:#e6db74">}</span>-pd
kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> get endpoints <span style="color:#e6db74">${</span>release_name<span style="color:#e6db74">}</span>-tidb
kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> get endpoints <span style="color:#e6db74">${</span>release_name<span style="color:#e6db74">}</span>-pd-peer
kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> get endpoints <span style="color:#e6db74">${</span>release_name<span style="color:#e6db74">}</span>-tikv-peer
kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> get endpoints <span style="color:#e6db74">${</span>release_name<span style="color:#e6db74">}</span>-tidb-peer
</code></pre></div><p>The <code>ENDPOINTS</code> field shown in the above command should be a comma-separated list of <code>cluster_ip:port</code>. If the field is empty or incorrect, check the health of the Pod and whether <code>kube-controller-manager</code> is working properly.</p>
</li>
<li>
<p>Enter the Pod's Network Namespace to diagnose network problems:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">tkctl debug -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span>
</code></pre></div><p>After the remote shell is started, use the <code>dig</code> command to diagnose the DNS resolution. If the DNS resolution is abnormal, refer to <a href="https://kubernetes.io/docs/tasks/administer-cluster/dns-debugging-resolution/">Debugging DNS Resolution</a> for troubleshooting.</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">dig <span style="color:#e6db74">${</span>HOSTNAME<span style="color:#e6db74">}</span>
</code></pre></div><p>Use the <code>ping</code> command to diagnose the connection with the destination IP (the ClusterIP resolved using <code>dig</code>):</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">ping <span style="color:#e6db74">${</span>TARGET_IP<span style="color:#e6db74">}</span>
</code></pre></div><ul>
<li>
<p>If the <code>ping</code> check fails, refer to <a href="https://www.praqma.com/stories/debugging-kubernetes-networking/">Debugging Kubernetes Networking</a> for troubleshooting.</p>
</li>
<li>
<p>If the <code>ping</code> check succeeds, continue to check whether the target port is open by using <code>telnet</code>:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">telnet <span style="color:#e6db74">${</span>target_ip<span style="color:#e6db74">}</span> <span style="color:#e6db74">${</span>target_port<span style="color:#e6db74">}</span>
</code></pre></div><p>If the <code>telnet</code> check fails, check whether the port corresponding to the Pod is correctly exposed and whether the applied port is correctly configured:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell"><span style="color:#75715e"># Checks whether the ports are consistent.</span>
kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> get po <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span> -ojson | jq <span style="color:#e6db74">'.spec.containers[].ports[].containerPort'</span>

<span style="color:#75715e"># Checks whether the application is correctly configured to serve the specified port.</span>
<span style="color:#75715e"># The default port of PD is 2379 when not configured.</span>
kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> -it exec <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span> -- cat /etc/pd/pd.toml | grep client-urls
<span style="color:#75715e"># The default port of PD is 20160 when not configured.</span>
kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> -it exec <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span> -- cat /etc/tikv/tikv.toml | grep addr
<span style="color:#75715e"># The default port of TiDB is 4000 when not configured.</span>
kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> -it exec <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span> -- cat /etc/tidb/tidb.toml | grep port
</code></pre></div></li>
</ul>
</li>
</ol>
<h2 id="the-pod-is-in-the-pending-state">The Pod is in the Pending state</h2>
<p>The Pending state of a Pod is usually caused by conditions of insufficient resources, such as:</p>
<ul>
<li>The <code>StorageClass</code> of the PVC used by PD, TiKV, Monitor Pod does not exist or the PV is insufficient.</li>
<li>No nodes in the Kubernetes cluster can satisfy the CPU or memory resources requested by the Pod</li>
<li>The number of TiKV or PD replicas and the number of nodes in the cluster do not satisfy the high availability scheduling policy of tidb-scheduler</li>
</ul>
<p>You can check the specific reason for Pending by using the <code>kubectl describe pod</code> command:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl describe po -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span>
</code></pre></div><ul>
<li>
<p>If the CPU or memory resources are insufficient, you can lower the CPU or memory resources requested by the corresponding component for scheduling, or add a new Kubernetes node.</p>
</li>
<li>
<p>If the <code>StorageClass</code> of the PVC cannot be found, change <code>storageClassName</code> in the <code>values.yaml</code> file to the name of the <code>StorageClass</code> available in the cluster; run <code>helm upgrade</code>; and delete Statefulset and the corresponding PVCs. Run the following command to get the <code>StorageClass</code> available in the cluster:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get storageclass
</code></pre></div></li>
<li>
<p>If a <code>StorageClass</code> exists in the cluster but the available PV is insufficient, you need to add PV resources correspondingly. For Local PV, you can expand it by referring to <a href="/docs/tidb-in-kubernetes/dev/configure-storage-class#local-pv-configuration">Local PV Configuration</a>.</p>
</li>
<li>
<p>tidb-scheduler has a high availability scheduling policy for TiKV and PD. For the same TiDB cluster, if there are N replicas of TiKV or PD, then the number of PD Pods that can be scheduled to each node is <code>M=(N-1)/2</code> (if N&lt;3, then M=1) at most, and the number of TiKV Pods that can be scheduled to each node is <code>M=ceil(N/3)</code> (if N&lt;3, then M=1; <code>ceil</code> means rounding up) at most. If the Pod's state becomes <code>Pending</code> because the high availability scheduling policy is not satisfied, you need to add more nodes in the cluster.</p>
</li>
</ul>
<h2 id="the-pod-is-in-the-crashloopbackoff-state">The Pod is in the <code>CrashLoopBackOff</code> state</h2>
<p>A Pod in the <code>CrashLoopBackOff</code> state means that the container in the Pod repeatedly aborts, in the loop of abort - restart by <code>kubelet</code> - abort. There are many potential causes of <code>CrashLoopBackOff</code>. In this case, the most effective way to locate it is to view the log of the Pod container:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> logs -f <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span>
</code></pre></div><p>If the log fails to help diagnose the problem, you can add the <code>-p</code> parameter to output the log information when the container was last started:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> logs -p <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span>
</code></pre></div><p>After checking the error messages in the log, you can refer to <a href="https://pingcap.com/docs/v3.0/how-to/troubleshoot/cluster-setup#cannot-start-tidb-server">Cannot start <code>tidb-server</code></a>, <a href="https://pingcap.com/docs/v3.0/how-to/troubleshoot/cluster-setup#cannot-start-tikv-server">Cannot start <code>tikv-server</code></a>, and <a href="https://pingcap.com/docs/v3.0/how-to/troubleshoot/cluster-setup#cannot-start-pd-server">Cannot start <code>pd-server</code></a> for further troubleshooting.</p>
<p>When the “cluster id mismatch” message appears in the TiKV Pod log, it means that the TiKV Pod might have used old data from other or previous TiKV Pod. If the data on the local disk remain uncleared when you configure local storage in the cluster, or the data is not recycled by the local volume provisioner due to a forced deletion of PV, an error might occur.</p>
<p>If you are confirmed that the TiKV should join the cluster as a new node and that the data on the PV should be deleted, you can delete the TiKV Pod and the corresponding PVC. The TiKV Pod automatically rebuilds and binds the new PV for use. When configuring local storage, delete local storage on the machine to avoid Kubernetes using old data. In cluster operation and maintenance, manage PV using the local volume provisioner and do not delete it forcibly. You can manage the lifecycle of PV by creating, deleting PVCs, and setting <code>reclaimPolicy</code> for the PV.</p>
<p>In addition, TiKV might also fail to start when <code>ulimit</code> is insufficient. In this case, you can modify the <code>/etc/security/limits.conf</code> file of the Kubernetes node to increase the <code>ulimit</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">root soft nofile 1000000
root hard nofile 1000000
root soft core unlimited
root soft stack 10240
</code></pre></div><p>If you cannot confirm the cause from the log and <code>ulimit</code> is also a normal value, troubleshoot it further by using <a href="#use-the-diagnostic-mode">the diagnostic mode</a>.</p>
<h2 id="unable-to-access-the-tidb-service">Unable to access the TiDB service</h2>
<p>If you cannot access the TiDB service, first check whether the TiDB service is deployed successfully using the following method:</p>
<ol>
<li>
<p>Check whether all components of the cluster are up and the status of each component is <code>Running</code>.</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get po -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span>
</code></pre></div></li>
<li>
<p>Check the log of TiDB components to see whether errors are reported.</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl logs -f <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span> -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> -c tidb
</code></pre></div></li>
</ol>
<p>If the cluster is successfully deployed, check the network using the following steps:</p>
<ol>
<li>
<p>If you cannot access the TiDB service using <code>NodePort</code>, try to access the TiDB service using the service domain or <code>clusterIP</code> on the node. If the <code>serviceName</code> or <code>clusterIP</code> works, the network within the Kubernetes cluster is normal. Then the possible issues are as follows:</p>
<ul>
<li>Network failure exists between the client and the node.</li>
<li>Check whether the <code>externalTrafficPolicy</code> attribute of the TiDB service is <code>Local</code>. If it is <code>Local</code>, you must access the client using the IP of the node where the TiDB Pod is located.</li>
</ul>
</li>
<li>
<p>If you still cannot access the TiDB service using the service domain or <code>clusterIP</code>, connect using <code>&lt;PodIP&gt;:4000</code> on the TiDB service backend. If the <code>PodIP</code> works, you can confirm that the problem is in the connection between the service domain and <code>PodIP</code> or between <code>clusterIP</code> and <code>PodIP</code>. Check the following items:</p>
<ul>
<li>
<p>Check whether the DNS service works well.</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get po -n kube-system -l k8s-app<span style="color:#f92672">=</span>kube-dns
dig <span style="color:#e6db74">${</span>tidb_service_domain<span style="color:#e6db74">}</span>
</code></pre></div></li>
<li>
<p>Check whether <code>kube-proxy</code> on each node is working.</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get po -n kube-system -l k8s-app<span style="color:#f92672">=</span>kube-proxy
</code></pre></div></li>
<li>
<p>Check whether the TiDB service rule is correct in the <code>iptables</code> rules.</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">iptables-save -t nat |grep <span style="color:#e6db74">${</span>clusterIP<span style="color:#e6db74">}</span>
</code></pre></div></li>
<li>
<p>Check whether the corresponding endpoint is correct.</p>
</li>
</ul>
</li>
<li>
<p>If you cannot access the TiDB service even using <code>PodIP</code>, the problem is on the Pod level network. Check the following items:</p>
<ul>
<li>Check whether the relevant route rules on the node are correct.</li>
<li>Check whether the network plugin service works well.</li>
<li>Refer to <a href="#network-connection-failure-between-pods">network connection failure between Pods</a> section.</li>
</ul>
</li>
</ol>
<h2 id="tikv-store-is-in-tombstone-status-abnormally">TiKV Store is in <code>Tombstone</code> status abnormally</h2>
<p>Normally, when a TiKV Pod is in a healthy state (<code>Running</code>), the corresponding TiKV store is also in a healthy state (<code>UP</code>). However, concurrent scale-in or scale-out on TiKV components might cause part of TiKV stores to fall into the <code>Tombstone</code> state abnormally. When this happens, try the following steps to fix it:</p>
<ol>
<li>
<p>View the state of the TiKV store:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> tidbcluster <span style="color:#e6db74">${</span>release_name<span style="color:#e6db74">}</span> -ojson | jq <span style="color:#e6db74">'.status.tikv.stores'</span>
</code></pre></div></li>
<li>
<p>View the state of the TiKV Pod:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl get -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> po -l app.kubernetes.io/component<span style="color:#f92672">=</span>tikv
</code></pre></div></li>
<li>
<p>Compare the state of the TiKV store with that of the Pod. If the store corresponding to a TiKV Pod is in the <code>Offline</code> state, it means the store is being taken offline abnormally. You can use the following commands to cancel the offline process and perform recovery operations:</p>
<ol>
<li>
<p>Open the connection to the PD service:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl port-forward -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> svc/<span style="color:#e6db74">${</span>cluster_name<span style="color:#e6db74">}</span>-pd <span style="color:#e6db74">${</span>local_port<span style="color:#e6db74">}</span>:2379 &amp;&gt;/tmp/portforward-pd.log &amp;
</code></pre></div></li>
<li>
<p>Bring online the corresponding store:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">curl -X POST http://127.0.0.1:2379/pd/api/v1/store/<span style="color:#e6db74">${</span>store_id<span style="color:#e6db74">}</span>/state?state<span style="color:#f92672">=</span>Up
</code></pre></div></li>
</ol>
</li>
<li>
<p>If the TiKV store with the latest <code>lastHeartbeatTime</code> that corresponds to a Pod is in a <code>Tombstone</code> state, it means that the offline process is completed. At this time, you need to re-create the Pod and bind it with a new PV to perform recovery by taking the following steps:</p>
<ol>
<li>
<p>Set the <code>reclaimPolicy</code> value of the PV corresponding to the store to <code>Delete</code>:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl patch <span style="color:#66d9ef">$(</span>kubectl get pv -l app.kubernetes.io/instance<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>release_name<span style="color:#e6db74">}</span>,tidb.pingcap.com/store-id<span style="color:#f92672">=</span><span style="color:#e6db74">${</span>store_id<span style="color:#e6db74">}</span> -o name<span style="color:#66d9ef">)</span> -p <span style="color:#960050;background-color:#1e0010">'</span><span style="color:#f92672">{</span><span style="color:#e6db74">"spec"</span>:<span style="color:#f92672">{</span><span style="color:#e6db74">"persistentVolumeReclaimPolicy"</span>:<span style="color:#e6db74">"Delete"</span><span style="color:#f92672">}</span><span style="color:#f92672">}</span>
</code></pre></div></li>
<li>
<p>Remove the PVC used by the Pod:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl delete -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> pvc tikv-<span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span> --wait<span style="color:#f92672">=</span>false
</code></pre></div></li>
<li>
<p>Remove the Pod, and wait for it to be re-created:</p>
<div class="copyable-code-block shell-regular">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">kubectl delete -n <span style="color:#e6db74">${</span>namespace<span style="color:#e6db74">}</span> pod <span style="color:#e6db74">${</span>pod_name<span style="color:#e6db74">}</span>
</code></pre></div></li>
</ol>
<p>After the Pod is re-created, a new store is registered in the TiKV cluster. Then the recovery is completed.</p>
</li>
</ol>
<h2 id="long-queries-are-abnormally-interrupted-in-tidb">Long queries are abnormally interrupted in TiDB</h2>
<p>Load balancers often set the idle connection timeout. If no data is sent over a connection for a specific period of time, load balancer closes the connection.</p>
<p>If a long query is interrupted when you use TiDB, check the middleware program between the client and the TiDB server.
If the idle timeout is not long enough for your query, try to set the timeout to a larger value. If you cannot reset it, enable the <code>tcp-keep-alive</code> option in TiDB.</p>
<p>In Linux, the keepalive probe packet is sent every 7,200 seconds by default. To shorten the interval, configure <code>sysctls</code> via the <code>podSecurityContext</code> field.</p>
<ul>
<li>
<p>If <code>--allowed-unsafe-sysctls=net.*</code> can be configured for <a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet/">kubelet</a> in the Kubernetes cluster, configure this parameter for kubelet and configure TiDB in the following way:</p>
<div class="copyable-code-block ">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">tidb:
  ...
  podSecurityContext:
    sysctls:
    - name: net.ipv4.tcp_keepalive_time
      value: <span style="color:#e6db74">"300"</span>
</code></pre></div></li>
<li>
<p>If <code>--allowed-unsafe-sysctls=net.*</code> cannot be configured for kubelet, configure TiDB in the following way:</p>
<div class="copyable-code-block ">
</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">tidb:
  annotations:
    tidb.pingcap.com/sysctl-init: <span style="color:#e6db74">"true"</span>
  podSecurityContext:
    sysctls:
    - name: net.ipv4.tcp_keepalive_time
      value: <span style="color:#e6db74">"300"</span>
  ...
</code></pre></div></li>
</ul>
<blockquote>
<p><strong>Note:</strong></p>
<p>The configuration above requires TiDB Operator 1.1 or later version.</p>
</blockquote>
</div>
<div class="article-toc"></div>
<div class="git-info">
<a class="link" href="https://github.com/pingcap/docs-tidb-operator/blob/master/en/troubleshoot.md">"Troubleshoot TiDB in Kubernetes"</a>
    was last updated
    <span>Apr 16 2020</span>:
    <a class="link" href="https://github.com/pingcap/docs-tidb-operator/commit/9a0a55dcf6d247fe5d1da5c4a63914987eed62b3">
        update the format of the variables (#194) <span class="hash">(9a0a55d)</span>
</a>
</div></div>
<div class="sidebar-page">
<div class="sticky-sidebar">
<a class="improve-doc" href="https://github.com/pingcap/docs-tidb-operator/edit/master/en/troubleshoot.md" target="_blank">
<svg fill="#142848" height="14" viewbox="0 0 275.836 275.836" width="14" xmlns="http://www.w3.org/2000/svg"><path d="M191.344 20.922l-95.155 95.155a5.99 5.99 0 0 0-1.565 2.734l-8.167 31.454a6.003 6.003 0 0 0 7.315 7.316l31.454-8.168a6.003 6.003 0 0 0 2.734-1.565l95.153-95.153.005-.004.004-.005 19.156-19.156a5.998 5.998 0 0 0 .001-8.484L218.994 1.758a5.998 5.998 0 0 0-8.485 0l-19.155 19.155-.005.004-.005.005zm-70.713 117.286l-19.993 5.192 5.191-19.993 89.762-89.762 14.801 14.802-89.761 89.761zm94.12-123.723l14.801 14.802-10.675 10.675-14.801-14.802 10.675-10.675z"></path><path d="M238.037 65.022a6 6 0 0 0-6 6v192.813H43.799V34.417h111.063a6 6 0 0 0 0-12H37.799a6 6 0 0 0-6 6v241.419a6 6 0 0 0 6 6h200.238a6 6 0 0 0 6-6V71.022a6 6 0 0 0-6-6z"></path></svg>
    Edit this page
</a>
<a class="request-docs-changes" href="https://github.com/pingcap/docs-tidb-operator/issues/new?body=File:%20[%2fen%2ftroubleshoot.md](https%3a%2f%2fpingcap.com%2fdocs%2ftidb-in-kubernetes%2fdev%2ftroubleshoot%2f)" target="_blank">
<svg height="14px" version="1.1" viewbox="0 0 192 192" width="14px" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g fill="none" fill-rule="nonzero" font-family="none" font-size="none" font-weight="none" stroke="none" stroke-dasharray="" stroke-dashoffset="0" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-width="1" style="mix-blend-mode: normal" text-anchor="none"><path d="M0,192v-192h192v192z" fill="none"></path><g fill="#142848"><path d="M162.34375,42.34375l-90.34375,90.34375l-34.34375,-34.34375l-11.3125,11.3125l45.65625,45.65625l101.65625,-101.65625z"></path></g></g></svg>

    Request docs changes
</a>
<p class="toc-title">What’s on this page</p>
<div id="smart_toc_wrapper"></div>
</div>
</div>
</div>
</div>
<footer>
<div class="container">
<div class="flex-list-wrap">
<div class="flex-list">
<h4 class="list-title"><strong>Product</strong></h4>
<ul>
<li><a href="/docs/v3.0/">TiDB</a></li>
<li><a href="/docs/v3.0/reference/tispark/">TiSpark</a></li>
<li><a href="/docs/v3.0/roadmap/">Roadmap</a></li>
</ul>
</div>
<div class="flex-list">
<h4 class="list-title"><strong>Docs</strong></h4>
<ul>
<li><a href="/docs/dev/how-to/get-started/deploy-tidb-from-docker-compose/">Quick Start</a></li>
<li><a href="/blog/2017-07-24-tidbbestpractice/">Best Practices</a></li>
<li><a href="/docs/stable/faq/tidb/">FAQ</a></li>
<li><a href="/docs/stable/reference/tools/user-guide/">TiDB Tools</a></li>
<li><a href="/docs/dev/releases/rn/">Release Notes</a></li>
</ul>
</div>
<div class="flex-list">
<h4 class="list-title"><strong>Resources</strong></h4>
<ul>
<li><a href="/blog/">Blog</a></li>
<li><a href="/weekly/">Monthly</a></li>
<li><a href="https://github.com/pingcap" target="_blank">GitHub</a></li>
<li><a href="/community">TiDB Community</a></li>
</ul>
</div>
<div class="flex-list">
<h4 class="list-title"><strong>Company</strong></h4>
<ul>
<li><a href="/about/">About</a></li>
<li><a href="https://angel.co/pingcap-1/jobs" target="_blank">Careers</a></li>
<li><a href="/news/">News</a></li>
<li><a href="/contact-us/">Contact Us</a></li>
<li><a href="/en/privacy-policy/">Privacy Policy</a></li>
<li><a href="/terms-of-service/">Terms of Service</a></li>
</ul>
</div>
</div>
<div class="contact-list-wrap">
<div class="flex-list">
<h4 class="list-title"><strong>Connect</strong></h4>
<ul>
<li><a class="twitter" href="https://twitter.com/PingCAP" target="_blank"><svg height="19" viewbox="0 0 612 612" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M612 116.258a250.714 250.714 0 0 1-72.088 19.772c25.929-15.527 45.777-40.155 55.184-69.411-24.322 14.379-51.169 24.82-79.775 30.48-22.907-24.437-55.49-39.658-91.63-39.658-69.334 0-125.551 56.217-125.551 125.513 0 9.828 1.109 19.427 3.251 28.606-104.326-5.24-196.835-55.223-258.75-131.174-10.823 18.51-16.98 40.078-16.98 63.101 0 43.559 22.181 81.993 55.835 104.479a125.556 125.556 0 0 1-56.867-15.756v1.568c0 60.806 43.291 111.554 100.693 123.104-10.517 2.83-21.607 4.398-33.08 4.398-8.107 0-15.947-.803-23.634-2.333 15.985 49.907 62.336 86.199 117.253 87.194-42.947 33.654-97.099 53.655-155.916 53.655-10.134 0-20.116-.612-29.944-1.721 55.567 35.681 121.536 56.485 192.438 56.485 230.948 0 357.188-191.291 357.188-357.188l-.421-16.253c24.666-17.593 46.005-39.697 62.794-64.861z"></path></svg> Twitter</a></li>
<li><a class="linkedin" href="https://www.linkedin.com/company/pingcap/" target="_blank"><svg height="16" viewbox="0 0 438.536 438.535" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M5.424 145.895H99.64v282.932H5.424zM408.842 171.739c-19.791-21.604-45.967-32.408-78.512-32.408-11.991 0-22.891 1.475-32.695 4.427-9.801 2.95-18.079 7.089-24.838 12.419-6.755 5.33-12.135 10.278-16.129 14.844-3.798 4.337-7.512 9.389-11.136 15.104v-40.232h-93.935l.288 13.706c.193 9.139.288 37.307.288 84.508 0 47.205-.19 108.777-.572 184.722h93.931V270.942c0-9.705 1.041-17.412 3.139-23.127 4-9.712 10.037-17.843 18.131-24.407 8.093-6.572 18.13-9.855 30.125-9.855 16.364 0 28.407 5.662 36.117 16.987 7.707 11.324 11.561 26.98 11.561 46.966V428.82h93.931V266.664c-.007-41.688-9.897-73.328-29.694-94.925zM53.103 9.708c-15.796 0-28.595 4.619-38.4 13.848C4.899 32.787 0 44.441 0 58.529 0 72.42 4.758 84.034 14.275 93.358c9.514 9.325 22.078 13.99 37.685 13.99h.571c15.99 0 28.887-4.661 38.688-13.99 9.801-9.324 14.606-20.934 14.417-34.829-.19-14.087-5.047-25.742-14.561-34.973C81.562 14.323 68.9 9.708 53.103 9.708z"></path></svg> LinkedIn</a></li>
<li><a class="reddit" href="https://www.reddit.com/r/TiDB/" target="_blank"><svg height="18" viewbox="0 0 279.748 279.748" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M279.748 133.142c0-19.299-15.701-35-35-35-10.768 0-20.674 4.812-27.279 13.064-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692 42.895 9.294c3.285 12.782 14.901 22.258 28.693 22.258 16.336 0 29.627-13.29 29.627-29.626 0-16.336-13.291-29.627-29.627-29.627-11.801 0-21.999 6.941-26.759 16.95l-49.497-10.725a10.002 10.002 0 0 0-11.651 6.756L134.636 95.43c-26.164.638-50.988 6.053-72.356 15.775-6.606-8.251-16.512-13.063-27.28-13.063-19.299 0-35 15.701-35 35 0 9.373 3.683 18.173 10.222 24.709-3.9 8.37-5.875 17.076-5.875 25.936 0 24.048 14.396 46.492 40.538 63.199 25.447 16.264 59.183 25.221 94.989 25.221 35.808 0 69.542-8.957 94.989-25.221 26.142-16.707 40.538-39.151 40.538-63.199 0-8.859-1.975-17.565-5.875-25.936 6.539-6.537 10.222-15.336 10.222-24.709zM15.369 145.139c-2.212-3.59-3.369-7.688-3.369-11.997 0-12.682 10.317-23 23-23 5.444 0 10.558 1.851 14.649 5.258-14.622 8.302-26.132 18.289-34.28 29.739zm52.671 20.266c0-13.785 11.215-25 25-25s25 11.215 25 25-11.215 25-25 25-25-11.215-25-25zm123.119 57.054c-9.745 10.637-29.396 17.244-51.285 17.244-21.888 0-41.539-6.607-51.284-17.244a9.937 9.937 0 0 1-2.617-7.192 9.933 9.933 0 0 1 3.235-6.937 9.974 9.974 0 0 1 6.754-2.627c2.797 0 5.484 1.183 7.373 3.244 5.803 6.333 20.827 10.756 36.539 10.756s30.737-4.423 36.539-10.756a10.022 10.022 0 0 1 7.374-3.244c2.508 0 4.906.933 6.755 2.627a9.928 9.928 0 0 1 3.234 6.937 9.933 9.933 0 0 1-2.617 7.192zm-4.451-32.054c-13.785 0-25-11.215-25-25s11.215-25 25-25 25 11.215 25 25-11.215 25-25 25zm77.671-45.266c-8.147-11.45-19.657-21.436-34.28-29.739 4.092-3.408 9.205-5.258 14.649-5.258 12.683 0 23 10.318 23 23 0 4.309-1.157 8.407-3.369 11.997z"></path></svg>Reddit</a></li>
<li><a class="google-plus" href="https://groups.google.com/forum/#!forum/tidb-user" target="_blank"><svg height="20" viewbox="0 0 491.858 491.858" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M377.472 224.957H201.319v58.718H308.79c-16.032 51.048-63.714 88.077-120.055 88.077-69.492 0-125.823-56.335-125.823-125.824 0-69.492 56.333-125.823 125.823-125.823 34.994 0 66.645 14.289 89.452 37.346l42.622-46.328c-34.04-33.355-80.65-53.929-132.074-53.929C84.5 57.193 0 141.693 0 245.928s84.5 188.737 188.736 188.737c91.307 0 171.248-64.844 188.737-150.989v-58.718l-.001-.001zM491.858 224.857h-36.031v-36.031h-30.886v36.031H388.91v30.883h36.031v36.032h30.886V255.74h36.031z"></path></svg>Google Group</a></li>
<li><a class="stack-overflow" href="https://stackoverflow.com/questions/tagged/tidb" target="_blank"><svg height="17" viewbox="0 0 547.597 547.597" width="18" xmlns="http://www.w3.org/2000/svg"><path d="M140.81 475.111h.024l189.91-.269c8.434-.013 15.3-6.886 15.3-15.318v-21.298c0-8.428-6.854-15.288-15.3-15.288l-189.91.264c-8.433.012-15.3 6.885-15.3 15.318v21.31c.001 8.427 6.855 15.281 15.276 15.281z"></path><path d="M58.667 517.854c.073 29.26.073 29.449 3.072 29.449h.055l10.612.294h.086s85.814 0 171.629-.036c42.914-.019 85.821-.05 118-.092 16.09-.019 29.505-.043 38.887-.074 17.803-.055 17.803-.055 17.803-3.072l.3-10.697V333.299c0-8.434-6.866-15.3-15.3-15.3h-11.909c-8.434 0-15.3 6.866-15.3 15.3V496.22c0 5.062-4.119 9.18-9.181 9.18H110.51c-5.061 0-9.18-4.118-9.18-9.18V333.299c0-8.434-6.867-15.3-15.3-15.3H73.82c-8.433 0-15.3 6.86-15.3 15.3 0 23.342.012 76.084.055 122.981.019 23.447.05 45.442.092 61.574z"></path><path d="M142.322 397.399l189.402 17.467c.478.043.948.062 1.413.062 7.956 0 14.468-5.985 15.159-13.917l1.83-21.096c.729-8.396-5.508-15.851-13.898-16.628l-189.102-17.461c-8.593-.795-15.869 5.441-16.653 13.825l-1.97 21.108a15.172 15.172 0 0 0 3.452 11.181 15.19 15.19 0 0 0 10.367 5.459zM437.636 208.849a15.253 15.253 0 0 0 17.694 12.443l21.065-3.678c8.311-1.451 13.898-9.395 12.454-17.706l-32.504-187.23c-1.42-8.207-9.21-13.917-17.692-12.448l-21.065 3.678c-8.311 1.451-13.898 9.395-12.454 17.705l32.502 187.236zM190.333 194.375l163.6 96.708a15.28 15.28 0 0 0 7.778 2.136c5.393 0 10.447-2.876 13.183-7.509l10.876-18.36c2.08-3.519 2.674-7.631 1.658-11.591a15.18 15.18 0 0 0-7.032-9.358l-163.6-96.714c-7.014-4.149-16.836-1.597-20.967 5.374l-10.869 18.36a15.2 15.2 0 0 0-1.658 11.591 15.21 15.21 0 0 0 7.031 9.363zM387.525 240.501a15.276 15.276 0 0 0 12.626 6.659c3.091 0 6.077-.924 8.635-2.681l17.405-11.934c6.953-4.768 8.752-14.314 4.015-21.292L323.29 54.104c-4.584-6.732-14.498-8.623-21.236-3.984l-17.737 12.21c-6.945 4.779-8.727 14.327-3.971 21.291l107.179 156.88zM154.482 302.319l183.465 49.156c1.298.349 2.632.526 3.966.526 6.903 0 12.98-4.67 14.762-11.347l5.508-20.624c2.179-8.152-2.681-16.555-10.826-18.74l-183.465-49.162c-8.017-2.148-16.604 2.852-18.728 10.826l-5.508 20.63c-2.179 8.142 2.68 16.551 10.826 18.735z"></path></svg>Stack Overflow</a></li>
</ul>
</div>
<div class="subscribe">
<a href="https://share.hsforms.com/1e2W03wLJQQKPd1d9rCbj_Q2npzm"><button class="btn btn-subscribe f-tc">Subscribe to Blog</button></a>
</div>
</div>
</div>
<div class="container copyright-container">
<p class="copyright">© 2020 PingCAP. All Rights Reserved.</p>
<a class="copyright-btn-lang" href="/docs-cn/tidb-in-kubernetes/dev" id="lang">中文</a>
</div>
</footer>
<button class="back-to-top" type="button"><svg height="512" viewbox="0 0 284.929 284.929" width="512" xmlns="http://www.w3.org/2000/svg"><path d="M282.082 195.285L149.028 62.24c-1.901-1.903-4.088-2.856-6.562-2.856s-4.665.953-6.567 2.856L2.856 195.285C.95 197.191 0 199.378 0 201.853c0 2.474.953 4.664 2.856 6.566l14.272 14.271c1.903 1.903 4.093 2.854 6.567 2.854s4.664-.951 6.567-2.854l112.204-112.202 112.208 112.209c1.902 1.903 4.093 2.848 6.563 2.848 2.478 0 4.668-.951 6.57-2.848l14.274-14.277c1.902-1.902 2.847-4.093 2.847-6.566.001-2.476-.944-4.666-2.846-6.569z" fill="#FFF"></path></svg>
</button>
</div><div class="overlay"></div><script src="https://download.pingcap.com/js/jquery.min.js"></script><script src="/js/vendor/lazyload.min.js" type="text/javascript"></script>
<script src="/js/doc.js" type="text/javascript"></script>
<script src="/js/anchor.js" type="text/javascript"></script><script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script crossorigin="anonymous" integrity="sha384-jbFinqIbKkHNg+QL+yxB4VrBC0EAPTuaLGeRT0T+NfEV89YC6u1bKxHLwoo+/xxY" src="https://browser.sentry-cdn.com/5.11.0/bundle.min.js"></script><script>Sentry.init({ 
            dsn: 'https://3f28ed393c5545daa74496b3cdb2e9ba@sentry.io/1887163' 
        });</script><script src="/js/app.js"></script></body></html>